
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Example Applications &mdash; Multi-UART Module Usage v0.1 documentation</title>
    <link rel="stylesheet" href="_static/xdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://mathjax.connectmv.com/MathJax.js"></script>
    <script type="text/javascript" src="_static/xcomment.js"></script>
    <link rel="top" title="Multi-UART Module Usage v0.1 documentation" href="index.html" />
    <link rel="prev" title="Programming Guide" href="Programming Guide.html" /> 

<script>
function setheight() {
h1 = document.getElementById('d1').style.height;
h2 = document.getElementById('d2').style.height;

if (parseInt(h1) > parseInt(h2)) {
document.getElementById('d2').style.height=h1 + "px";
}
else {
document.getElementById('d1').style.height=h2 + "px";
}

}
</script>
</head>

<body onload="setheight();">

  

    <div class="document" id='d1'>
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
<div style="float: right">
<a href="Programming Guide.html"
                        title="previous chapter"> &lt&lt </a>
</div>

            
  <div class="section" id="example-applications">
<h1>Example Applications<a class="headerlink" href="#example-applications" title="Permalink to this headline">¶</a></h1>
<p>This section discusses both the demonstration and test applications that are utilised in verification of the multi-UART component. It also deals with the scripts that are utilised to ensure that the UART is operating under a variety of conditions (such as long streams of burst traffic).</p>
<div class="section" id="demonstration-and-test-applications">
<h2>Demonstration and Test Applications<a class="headerlink" href="#demonstration-and-test-applications" title="Permalink to this headline">¶</a></h2>
<div class="section" id="demo-application-hardware">
<h3>Demo Application Hardware<a class="headerlink" href="#demo-application-hardware" title="Permalink to this headline">¶</a></h3>
<p>The echo demonstration application can be run on the slice kit Board. The following other parts are required -</p>
<blockquote>
<div><ul class="simple">
<li>USB to Serial adapter (e.g. FTDI TTL-232R-3V3 from Farnell)</li>
</ul>
</div></blockquote>
<p>The demo applications will build by default for the Motor Control Board. To build for XK-1 you need to make the following changes.</p>
<p>MultiUART component requires 8-bit ports for both UART transmit and UART receive ports. The version runs on L1 (one core). The Slices should be assembled in the following manner:</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="25%" />
<col width="25%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><strong>Slice</strong></th>
<th class="head"><strong>Core Board - Core</strong></th>
<th class="head"><strong>Core Board - Type</strong></th>
<th class="head"><strong>Core Board - Jumper</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr><td>UART</td>
<td>Core 0</td>
<td>Type 0</td>
<td>J4</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>The UART slice has two types of voltage levels of communications.</dt>
<dd><ul class="first last simple">
<li>CMOS TTL</li>
<li>RS-232</li>
</ul>
</dd>
</dl>
<p>By default, this uses the RS-232 levels. In order to use the CMOS TTL levels, short J3 pins (25-26) of the MUART slice. At a time, only one voltage level type can be used for all 8 UART channels (RS-232 or CMOS TTL). When using the RS-232 levels, UART device pins must be connected to J4 of the UART slice. When using TTL levels, UART device pins must be connected to J3 of UART slice (along with J3 25-26 pins shorted). UART channel information of UART slice is as:</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="36%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><strong>UART Channel</strong></th>
<th class="head"><strong>J3/J4 Pin no.(TX)</strong></th>
<th class="head"><strong>J3/J4 Pin no.(RX)</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr><td>0</td>
<td>1</td>
<td>2</td>
</tr>
<tr><td>1</td>
<td>5</td>
<td>6</td>
</tr>
<tr><td>2</td>
<td>7</td>
<td>8</td>
</tr>
<tr><td>3</td>
<td>11</td>
<td>12</td>
</tr>
<tr><td>4</td>
<td>13</td>
<td>14</td>
</tr>
<tr><td>5</td>
<td>17</td>
<td>18</td>
</tr>
<tr><td>6</td>
<td>19</td>
<td>20</td>
</tr>
<tr><td>7</td>
<td>23</td>
<td>24</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="demo-application-configuration">
<h3>Demo Application Configuration<a class="headerlink" href="#demo-application-configuration" title="Permalink to this headline">¶</a></h3>
<p>The demo application can be compiled and run in following modes.</p>
<blockquote>
<div><ul>
<li><p class="first">Echo Test Mode</p>
<blockquote>
<div><ul class="simple">
<li>This mode of operation produces an application that operates as an echo device. This therefore echos back any characters that it receives via the same transmit UART channel.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>Configuration is done utilising the defines listed out below.</p>
<div class="highlight-none"><div class="highlight"><pre>/* Do a loopback test with the internal reference clock only - uses non-standard baud rates*/
//#define LOOP_REF_TEST

/* Do echo test */
#define ECHO_TEST

/* Do simple test */
//#define SIMPLE_TEST

/* Reconfiguration enabled for simple test */
//#define SIMPLE_TEST_DO_RECONF
</pre></div>
</div>
<p><strong>LOOP_REF_TEST</strong></p>
<blockquote>
<div>This configures the tests with internal clocking only. This means that no external clock source is required to conduct testing. However it will only operate at multiples the internal reference clock (e.g. 100000 bps).</div></blockquote>
</div>
<div class="section" id="application-description">
<h3>Application Description<a class="headerlink" href="#application-description" title="Permalink to this headline">¶</a></h3>
<p>The Echo Test demonstration application shows a typical structure of an application that might be implemented by the user of this component. The diagram in <em class="xref std std-ref">fig_echo_struct</em> shows the structure of the demonstration application.</p>
<p>In addition to the two multi-UART threads the application utilises two further threads - one providing buffering for the UART RX and one handling to the pushing of data to the TX buffer. The RX buffering is implemented as an example only and is not strictly necessary in this application as the TX thread already provides some buffering.</p>
<p>When the RX thread receives a character over the UART it saves it into the local single entry buffer and puts a data token into the channel. This data token is received by RX buffering thread and tells it which UART channel a character has been received on. The RX buffering thread then grabs this character out of the buffer slot, validates it utilising the provided validation function and inserts it into a larger, more comprehensive buffer.</p>
<p>The TX thread operates by polling the buffer between the RX buffering thread and the Echo Application thread. When an entry is seen it pulls it from the buffer and utilises the API to push the value into the TX thread buffer. From there the TX thread will send that value on the correct UART channel on the 8 bit port.</p>
<p>The channel for the TX thread is primarily used for reconfiguration. This is discussed in more detail in <a class="reference internal" href="Programming Guide.html#sec-reconf-rxtx"><span>Reconfiguration of RX &amp; TX Server</span></a>.</p>
<p>Specific usage of the API is discussed in <a class="reference internal" href="Programming Guide.html#sec-interfacing-tx"><span>Interfacing to the TX Server</span></a> and <a class="reference internal" href="Programming Guide.html#sec-interfacing-rx"><span>Interfacing to the RX Server</span></a>.</p>
<div class="figure" id="fig-echo-struct">
<img alt="_images/EchoSoftwareDiagram.png" src="_images/EchoSoftwareDiagram.png" />
</div>
</div>
</div>
</div>



          </div>
        </div>
      </div>
      <div class="sphinxsidebar" id='d2'>
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Multi-UART Module Usage (0.1)</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Overview.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Resource Requirements.html">Resource Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hardware Requirements.html">Hardware Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="Component Description.html">Component Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html">Multi-UART Common API</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html#multi-uart-transmit-api">Multi-UART Transmit API</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html#multi-uart-receive-api">Multi-UART Receive API</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html#multi-uart-helper-api">Multi-UART Helper API</a></li>
<li class="toctree-l1"><a class="reference internal" href="Programming Guide.html">Programming Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Example Applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#demonstration-and-test-applications">Demonstration and Test Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#demo-application-hardware">Demo Application Hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="#demo-application-configuration">Demo Application Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#application-description">Application Description</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none;margin-bottom: 10px;">
  <h3>Search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>



    <div class="footer">
    </div>
  </body>
</html>



